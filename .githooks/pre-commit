#!/bin/bash

# DISABLED for now
exit 0

set -euo pipefail

HOOK_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$(cd "$HOOK_DIR/.." && pwd)"

cd "$REPO_ROOT"

if [[ -z "${POEDITOR_API_TOKEN:-}" ]] || [[ -z "${POEDITOR_PROJECT_ID:-}" ]]; then
    exit 0
fi

if ! command -v python3 &>/dev/null; then
    exit 0
fi

if ! python3 scripts/i18nsync.py check &>/dev/null; then
    echo "Translations out of sync"
    echo "run python3 scripts/i18nsync.py sync"
    exit 1
fi

exit 0
